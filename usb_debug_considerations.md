# USB 호스트 및 액세서리 디버깅 고려사항 정리

이 문서는 Android 공식 문서의 [USB 디버그 고려사항](https://developer.android.com/develop/connectivity/usb?hl=ko#debug-considerations) 내용을 바탕으로, USB 액세서리(AOA)나 호스트 기능을 개발할 때의 디버깅 방법을 한글로 정리한 것입니다.

## 1. 주요 문제점
USB 액세서리 또는 호스트 기능을 사용하는 앱을 개발할 때는 실제 하드웨어가 Android 기기의 USB 포트에 연결되어야 합니다. 이때 **USB 포트가 이미 점유**되어 있기 때문에, 평소처럼 USB 케이블을 통해 PC와 앱을 디버깅(ADB 연결)하는 것이 불가능합니다.

## 2. 해결책: 네트워크를 통한 ADB 연결 (TCP/IP)
USB 포트를 통하지 않고 Wi-Fi와 같은 네트워크를 통해 ADB 명령을 실행하여 실시간 로그(`logcat`)를 확인하거나 앱을 설치할 수 있습니다.

### 디버깅 설정 단계 (Step-by-Step)

1. **최초 연결**: Android 기기를 USB 케이블로 컴퓨터에 먼저 연결합니다.
2. **TCP/IP 모드 활성화**: 터미널(또는 명령 프롬프트)에서 다음 명령어를 입력합니다. (포트 번호 `5555` 사용)
   ```bash
   adb tcpip 5555
   ```
3. **USB 케이블 제거**: 이제 컴퓨터와 기기 사이의 USB 케이블을 뽑아도 됩니다.
4. **IP 주소 확인**: Android 기기가 PC와 같은 Wi-Fi에 연결되어 있는지 확인하고, 기기의 IP 주소를 찾습니다.
   * *설정 > 휴대전화 정보 > 상태 > IP 주소* 등에서 확인 가능합니다.
5. **네트워크 연결**: PC에서 다음 명령어를 입력하여 기기에 무선으로 연결합니다.
   ```bash
   adb connect <기기-IP-주소>:5555
   ```
   * 예: `adb connect 192.168.0.10:5555`
6. **디버깅 시작**: 연결이 완료되면 이제 USB가 연결된 상태와 동일하게 `adb logcat`이나 IDE(Android Studio/VS Code)의 디버깅 기능을 사용할 수 있습니다.

## 3. 원래대로 복구하기
하드웨어 테스트를 마치고 다시 유선 USB 디버깅 모드로 돌아가고 싶다면 다음 명령어를 입력합니다.
```bash
adb usb
```

---
> [!TIP]
> **AOA 개발 시 팁**: AOA 통신을 위해 USB 액세서리를 기기에 꽂는 순간 ADB 연결이 끊어질 수 있으므로, 반드시 미리 네트워크 ADB를 설정해두는 것이 정신 건강에 좋습니다!
